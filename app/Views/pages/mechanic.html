<?php

include "../Model/mechanic.php";
include "../Model/client.php";
include "../Model/appointment.php";
include "../Model/intervention.php";
include "../Model/appointment_intervention.php";
include "../DB/DBconnection.php";

session_start();

?>
<html>

<head>
    <meta charset='UTF-8'>



    <style>
        .tabs {
            position: relative;
            min-height: 65%;
            clear: both;
            margin: 25px 0;
        }
        .tab {
            float: left;
        }
        .tab label {
            background: #eee;
            padding: 10px;
            border: 1px solid #ccc;
            margin-left: -1px;
            position: relative;
            left: 1px;
        }
        .tab [type=radio] {
            display: none;
        }
        .content {
            position: absolute;
            top: 28px;
            left: 0;
            background: white;
            right: 0;
            bottom: 0;
            padding: 20px;
            border: 1px solid #ccc;
        }
        [type=radio]:checked ~ label {
            background: white;
            border-bottom: 1px solid white;
            z-index: 2;
        }
        [type=radio]:checked ~ label ~ .content {
            z-index: 1;
        }
    </style>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>

<body>







<div id="page-wrap">

    <div class="tabs">

        <div class="tab">
            <input type="radio" id="tab-1" name="tab-group-1"> <?php if(isset($_GET['unu']))
				echo $_GET['unu'];
				?>
            <label for="tab-1">View clients</label>

            <div class="content">
                <h2 style="margin-left:45%">View client</h2>
                <br><br>
                <table border='1'  style='margin-left:30%; width:40%;'>
                    <tr><td>Id</td><td>First name</td><td>Last name</td><td>CNP</td><td>Phone</td><td>Address</td><td>Update</td><td>Delete</td></tr>
                    <?php
					$m=$_SESSION["currentMechanic"];
					$a=$_SESSION["mechanic"];

					<!--for($i=0; $i<count($a);$i++)-->
					<!--{-->
						<!--if(strcmp($a[$i]->userName,$m)==0)-->
                    <!--$id_mechanic=$a[$i]->id;-->
                    <!--}-->

                    <!--$p=$_SESSION["clients"];-->
                    <!--if(count($p)!=0)-->
                    <!--{-->
                    <!--for($i=0; $i<count($p);$i++)-->
                    <!--{-->
                    <!--if($p[$i]->id_mechanic==$id_mechanic)-->
                    <!--{-->
                    <!--echo "<tr><td>".$p[$i]->id."</td><td>".$p[$i]->firstName."</td><td>".$p[$i]->lastName."</td><td>".$p[$i]->cnp."</td><td>".$p[$i]->phone."</td><td>".$p[$i]->address."</td>";-->
                    <!--echo "<td><form method='post' action='../Controller/mechanicController.php'><input type='hidden' name='tempId' value='".$p[$i]->id."'/><button value='Modifica' name='modifica' ><i class='fa fa-edit' style='font-size:24px'></i></button></form></td>";-->
                    <!--echo "<td><form method='post' action='../Controller/mechanicController.php'><input type='hidden' name='tempId2' value='".$p[$i]->id."'/><button value='Sterge' name='sterge' ><i class='fa fa-trash' style='font-size:24px'></i></button></form></td></tr>";-->
                    <!--}-->
                    <!--}-->
                    <!--}-->

                    <!--?>-->

                </table>


            </div>
        </div>

        <div class="tab">
            <input type="radio" id="tab-2" name="tab-group-1"> <?php if(isset($_GET['doi']))
				echo $_GET['doi'];
				?>>
            <label for="tab-2">Add client</label>

            <div class="content">
                <h2 style="margin-left:47%">Add client</h2>
                <br><br>
                <table style="margin-left:43%">
                    <form method="post" action="../Controller/addclientController.php">
                        <tr>
                            <td >First name:</td>
                            <td><input type="text" name="firstName" placeholder="First name..." /></td>
                        </tr><tr></tr>
                        <tr>
                            <td>Last name:</td>
                            <td><input type="text" name="lastName" placeholder="Last name..."  /></td>
                        </tr><tr></tr>
                        <tr>
                            <td>CNP:</td>
                            <td><input type="text" name="cnp" placeholder="CNP..."  /></td>
                        </tr><tr></tr>
                        <tr>
                            <td>Phone:</td>
                            <td><input type="text" name="phone" placeholder="Phone..."  /></td>
                        </tr><tr></tr>
                        <tr>
                            <td >Address:</td>
                            <td><input type="text" name="address" placeholder="Address..."  /></td>
                        </tr><tr></tr>
                        <td></td> </tr>
                        <tr><td><br></td><td><br></td></tr><tr><td></td> </tr>
                        <tr>
                            <td></td>
                            <td><input type="submit" value="Add client" name="ok"  width="155"  STYLE="width: 155px"/></td></tr><tr><td></td> </tr>
                        <tr><td><br></td><td><br></td></tr><tr><td></td> </tr>
                    </form>
                </table><br><br>
            </div>
        </div>

        <div class="tab">
            <input type="radio" id="tab-3" name="tab-group-1"> <?php if(isset($_GET['trei']))
				 $_GET['trei'];
				?>>
            <label for="tab-3">View appointments</label>

            <div class="content">
                <h2 style="margin-left:45%">View appointments</h2>
                <br><br>
                <table border='1'  style='margin-left:30%; width:40%;'>
                    <tr><td>Id</td><td>client</td><td>Date</td><td>Start hour</td><td>End hour</td><td>Interventions</td><td>Price</td><td>Update</td><td>Delete</td></tr>
                    <?php
					$m=$_SESSION["currentmechanic"];
					$a=$_SESSION["mechanics"];

					for($i=0; $i<count($a);$i++)
					{
						if(strcmp($a[$i]->


                    <tr><td></td><td></td><td>

                     </td><td></td><td></td>

                    <td>
                        </td>
                    <td></td>
                    <td><form method='post' action='../Controller/mechanicController.php'><input type='hidden' name='updateApp' value='"."'/><button value='Modifica' name='modifica' ><i class='fa fa-edit' style='font-size:24px'></i></button></form></td>
                    <td><form method='post' action='../Controller/mechanicController.php'><input type='hidden' name='deleteApp' value='"."'/><button value='Sterge' name='sterge' ><i class='fa fa-trash' style='font-size:24px'></i></button></form></td></tr>




                </table>


            </div>
        </div>




        <div class="tab">
            <input type="radio" id="tab-4" name="tab-group-1"> <?php if(isset($_GET['patru'])) echo $_GET['patru'];?>>
            <label for="tab-4">Add appointment</label>

            <div class="content">
                <h2 style="margin-left:47%">Add appointment</h2>
                <br><br>
                <table style="margin-left:43%">
                    <form method="post" action="../Controller/addAppointmentController.php">
                        <tr>
                            <td >client:</td>
                            <td>
                                <select name="client" size=1 value="<?php if(isset($_SESSION['client'])) echo $_SESSION['client']; ?>" STYLE="width: 155px">
                                    <option value="test"> Select a client</option>
                                    <?php

						$m=$_SESSION["currentmechanic"];
						$a=$_SESSION["mechanics"];

						for($i=0; $i<count>($a);$i++)
						{
							if(strcmp($a[$i]->userName,$m)==0)
                                    $id_mechanic=$a[$i]->id;
                                    }

                                    $p=$_SESSION["clients"];
                                    if(count($p)!=0)
                                    {
                                    for($i=0; $i<count>($p);$i++)
                                    {
                                    if($p[$i]->id_mechanic==$id_mechanic)
                                    {
                                    $fullname=$p[$i]->firstName." ".$p[$i]->lastName;
                                    echo "<option value=" .$p[$i]->id. "></option>";
                                    }
                                    }d
                                    }
                                    ?>
                               </count> </select>
                            </td>
                        </tr><tr></tr>
                        <tr>
                            <td>Date:</td>
                            <td><input type="date" name="data" value="<?php if(isset($_SESSION['data'])) echo $_SESSION['data']; ?>" STYLE="width: 155px"/></td>
                        </tr><tr></tr>
                        <tr>
                            <td>Start hour:</td>
                            <td><input type="time" name="startHour" value="<?php if(isset($_SESSION['startHour'])) echo $_SESSION['startHour']; ?>" STYLE="width: 155px"/></td>
                        </tr><tr></tr>
                        <tr>
                            <td>End hour:</td>
                            <td><input type="time" name="endHour"  value="<?php if(isset($_SESSION['endHour'])) echo $_SESSION['endHour']; ?>" STYLE="width: 155px"/></td>
                        </tr><tr></tr>
                        <tr>
                            <td >Interventions:</td>
                            <td>
                                <!--<input type="text" name="interventions"  value="<?php if(isset($_SESSION['interventions'])) echo $_SESSION['interventions']; ?>" STYLE="width: 155px"/>-->

                                <select name="interventions[]" multiple STYLE="width: 155px" >
                                    <?php

						$interv=$_SESSION["interventions"];

						for($i=0; $i<count($interv);$i++)
						{
							 echo "<option value=" .$interv[$i]->id. ">" .$interv[$i]->name. "</option>";
                                    }

                                    ?>
                                </select>
                            </td>

                        <td><br></td><td><br></td>
                        <tr>
                            <td><input type="submit" value="View price" name="cost"></td>
                            <td><input type="submit" value="Add appointment" name="ok"  width="155"  STYLE="width: 155px"/></td></tr><tr><td></td> </tr>

                        <tr><td><br></td><td><br></td></tr><tr><td></td> </tr>
                    </form>
                </table><br><br>



            </div>
        </div>


    </div>



</div>


<br>
<form method="post" action="../Controller/logoutController.php">
    <input type="submit" value="Log out" name="logout"  width="155"  STYLE="width: 155px; margin-left:45%"/>
</form>



</body>

</html>